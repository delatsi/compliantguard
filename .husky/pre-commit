#!/bin/sh
set -e

echo "ğŸ” Running pre-commit validation..."

# Check if we're in frontend directory or project root
if [ -f "frontend/package.json" ]; then
  cd frontend
elif [ ! -f "package.json" ]; then
  echo "âŒ No package.json found. Please run from project root or frontend directory."
  exit 1
fi

echo "ğŸ“¦ Installing dependencies if needed..."
npm ci --prefer-offline --no-audit

echo "ğŸ§¹ Running ESLint..."
npm run lint

echo "ğŸ§ª Running tests..."
npm run test:run

echo "ğŸ—ï¸  Testing build..."
npm run build

echo "âœ… All pre-commit checks passed!"
